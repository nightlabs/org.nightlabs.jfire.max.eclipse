<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	
	<modelVersion>4.0.0</modelVersion>
	<artifactId>org.nightlabs.jfire.eclipse.max.assembly.parent</artifactId>
	<packaging>pom</packaging>
	
	<parent>
		<groupId>org.nightlabs.jfire.eclipse</groupId>
		<artifactId>org.nightlabs.jfire.eclipse.parent</artifactId>
		<version>1.3.0-SNAPSHOT</version>
		<relativePath>../org.nightlabs.jfire.eclipse.parent/pom.xml</relativePath>
	</parent>

	<properties>
		<assembly.directory>${project.build.directory}/assembly</assembly.directory>
		<assembly.eclipse.directory>${assembly.directory}/jfire-client</assembly.eclipse.directory>
		<assembly.plugins.directory>${assembly.eclipse.directory}/plugins</assembly.plugins.directory>
		<birt.designer.subdir>birt-rcp-report-designer-2_6_0</birt.designer.subdir>
		<birt.designer.plugins.subdir>birt-rcp-report-designer-2_6_0/plugins</birt.designer.plugins.subdir>
		<holongate.version>2.3.0</holongate.version>
	</properties>
	
	<dependencies>
		<dependency>
			<groupId>net.sf.opencsv</groupId>
			<artifactId>au.com.bytecode.opencsv</artifactId>
		</dependency>
		<dependency>
			<groupId>com.essiembre.eclipse</groupId>
			<artifactId>com.essiembre.eclipse.i18n.resourcebundle</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.specs</groupId>
			<artifactId>org.apache.servicemix.specs.stax-api-1.0</artifactId>
			<version>1.9.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.xpp3</artifactId>
			<version>1.1.4c_3</version>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.xstream</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.xmlpull</artifactId>
		</dependency>

		<dependency>
			<groupId>org.nightlabs</groupId>
			<artifactId>org.nightlabs.editor2d</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs</groupId>
			<artifactId>org.nightlabs.htmlcontent</artifactId>
		</dependency>
		
		<!-- ##### UI-projects, NOT jfire-min, only jfire-MAX ##### -->
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.connection.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.eclipse.ui.pdfrenderer</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.eclipse.ui.pdfviewer</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.eclipse.ui.pdfviewer.extension</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.editor2d.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.editor2d.viewer.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.jseditor.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.jseditor.ui.rcp</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.keyreader.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.eclipse</groupId>
			<artifactId>org.nightlabs.tableprovider.ui</artifactId>
		</dependency>
		
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.department.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.department.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.dynamictrade.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.dynamictrade.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.entityuserset.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.jbpm.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.issuetracking.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.issuetracking.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.issuetracking.trade.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.issuetimetracking.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.issuetimetracking.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.personrelation.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.prop.file.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.prop.html.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.admin.parameter.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire</groupId>
			<artifactId>org.nightlabs.jfire.reporting.oda.wrapper</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.oda.client</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.ui.rcp</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.reporting.trade.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.scripting.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.scripting.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.scripting.editor2d.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.scripting.print.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.simpletrade.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.simpletrade.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.trade.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.trade.editor2d.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.trade.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.voucher.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.voucher.admin.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.voucher.editor2d.ui</artifactId>
		</dependency>
		<dependency>
			<groupId>org.nightlabs.jfire.eclipse</groupId>
			<artifactId>org.nightlabs.jfire.voucher.print.ui</artifactId>
		</dependency>

		<dependency>
			<groupId>org.eclipse.birt.rcp-report-designer</groupId>
			<artifactId>org.eclipse.birt.reportdesigner</artifactId>
			<version>2.6.0</version>
			<type>zip</type>
		</dependency>

		<!-- draw2d comes from birt.reportdesigner -->
		<!-- dependency>
			<groupId>org.eclipse</groupId>
			<artifactId>draw2d</artifactId>
		</dependency-->
		
		<dependency>
		    <groupId>org.holongate.eclipse</groupId>
		    <artifactId>org.holongate.j2d</artifactId>
		    <version>${holongate.version}</version>
		    <type>zip</type>
		</dependency>
		<dependency>
		    <groupId>org.holongate.eclipse</groupId>
		    <artifactId>org.holongate.gef</artifactId>
		    <version>${holongate.version}</version>
		    <type>zip</type>
		</dependency>
		<dependency>
		    <groupId>org.holongate.eclipse</groupId>
		    <artifactId>org.holongate.draw2d</artifactId>
		    <version>${holongate.version}</version>
		    <type>zip</type>
		</dependency>
		
	</dependencies>
	
	<build>
		<pluginManagement>
			<plugins>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-dependency-plugin</artifactId>
					<executions>
						<execution>
							<id>unpack-platform</id>
							<phase>package</phase>
							<goals>
								<goal>unpack-dependencies</goal>
							</goals>
							<configuration>
								<outputDirectory>${assembly.directory}</outputDirectory>
								<includeGroupIds>org.nightlabs.jfire.eclipse</includeGroupIds>
								<includeArtifactIds>${jfire.eclipse.assembly.artifactId}</includeArtifactIds>
							</configuration>
						</execution>
						<execution>
							<id>copy-plugins</id>
							<goals>
								<goal>copy-dependencies</goal>
							</goals>
							<configuration>
								<outputDirectory>${assembly.plugins.directory}</outputDirectory>
								<includeTypes>jar</includeTypes>
								<excludeTransitive>true</excludeTransitive>
							</configuration>
						</execution>
						<execution>
							<id>unpack-birt</id>
							<phase>prepare-package</phase>
							<goals>
								<goal>unpack-dependencies</goal>
							</goals>
							<configuration>
								<outputDirectory>${assembly.directory}</outputDirectory>
								<includeGroupIds>org.eclipse.birt.rcp-report-designer</includeGroupIds>
								<includeArtifactIds>org.eclipse.birt.reportdesigner</includeArtifactIds>
								<excludes>
									${birt.designer.subdir}/.eclipseproduct,
									${birt.designer.subdir}/BIRT.exe,
									${birt.designer.subdir}/BIRT.ini,
									${birt.designer.subdir}/*.html
								</excludes>
								<!-- includes>
								
									This is the try to add only needed dependencies for reporting.admin.ui,
									however it still lacks javax.xml, xerces, xalan bunles as they are used
									as require-bundles but not as import-package.
								
									${birt.designer.plugins.subdir}/com.lowagie*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.transcoder*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.css*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.util*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.util.gui*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.bridge*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.dom*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.dom.svg*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.ext.awt*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.svggen*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.xml*.jar,
									${birt.designer.plugins.subdir}/org.apache.batik.parser*.jar
									${birt.designer.plugins.subdir}/org.apache.batik.pdf*.jar
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.device.extension*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.device.pdf*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.device.svg*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.device.swt*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.engine*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.engine.extension*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.examples*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.examples.core*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.reportitem*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.reportitem.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.chart.ui.extension*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.core_*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.core.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.data*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.data.aggregation*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.data.adapter*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.core*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui_*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.cubebuilder*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.editors*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.editors.schematic*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.lib*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.lib.explorer*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.rcp*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.designer.ui.views*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.engine_*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.engine.emitter.html*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.engine.emitter.pdf*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.engine.fonts*/**,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.item.crosstab.core*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.item.crosstab.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.report.model*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.birt.resources*/**,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity_*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.oda_*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.oda.consumer*.jar,			
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.oda.design*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.oda.design.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.oda.profile*.jar,			
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.sqm.core*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.connectivity.ui*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.help*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.modelbase.dbdefinition*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.datatools.modelbase.sql*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.draw2d*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.emf.common*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.emf.ecore*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.emf.ecore.change*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.emf.ecore.xmi*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.gef*.jar,
									${birt.designer.plugins.subdir}/org.eclipse.ltk.core.refactoring*.jar,
									${birt.designer.plugins.subdir}/org.w3c.css.sac*.jar,
									${birt.designer.plugins.subdir}/org.w3c.sac*/**,
									${birt.designer.plugins.subdir}/org.w3c.dom.svg*.jar,
									${birt.designer.plugins.subdir}/org.w3c.dom.smil*.jar,
									${birt.designer.plugins.subdir}/org.w3c.dom.events*.jar,
									${birt.designer.plugins.subdir}/org.mozilla.rhino*/**,
								</includes-->
							</configuration>
						</execution>
						<execution>
							<id>unpack-holongate</id>
							<phase>prepare-package</phase>
							<goals>
								<goal>unpack-dependencies</goal>
							</goals>
							<configuration>
								<outputDirectory>${assembly.plugins.directory}</outputDirectory>
								<includeGroupIds>org.holongate.eclipse</includeGroupIds>
								<useSubDirectoryPerArtifact>true</useSubDirectoryPerArtifact>
							</configuration>
						</execution>
					</executions>
				</plugin>

				<plugin>
					<artifactId>maven-antrun-plugin</artifactId>
					<executions>
						<execution>
							<phase>prepare-package</phase>
							<goals>
								<goal>run</goal>
							</goals>
							<configuration>
								<tasks>
									<move file="${assembly.directory}/${birt.designer.subdir}"
										tofile="${assembly.eclipse.directory}" />
								</tasks>
							</configuration>
						</execution>
						<execution>
							<id>chmod-jfire-executable</id>
							<phase>package</phase>
							<goals>
								<goal>run</goal>
							</goals>
							<configuration>
								<tasks>
									<!-- Dependency plugin discards file permissions so we need to set 
										them back manually. See: http://jira.codehaus.org/browse/MDEP-109 Marco :-) -->
									<chmod file="${assembly.eclipse.directory}/jfire" perm="ugo+rx" />
								</tasks>
							</configuration>
						</execution>
					</executions>
				</plugin>

				<plugin>
					<artifactId>maven-resources-plugin</artifactId>
					<version>2.5</version>
					<executions>
						<execution>
							<id>copy-resources</id>
							<phase>package</phase>
							<goals>
								<goal>copy-resources</goal>
							</goals>
							<configuration>
								<resources>
									<resource>
										<directory>src/main/resources</directory>
									</resource>
								</resources>
								<outputDirectory>${assembly.directory}</outputDirectory>
								<overwrite>true</overwrite>
							</configuration>
						</execution>
					</executions>
				</plugin>

				<plugin>
					<artifactId>maven-assembly-plugin</artifactId>
					<version>2.2.1</version>
					<executions>
						<execution>
							<id>make-assembly</id>
							<phase>package</phase> <!-- append to the packaging phase. -->
							<goals>
								<goal>single</goal>
							</goals>
						</execution>
					</executions>
					<configuration>
						<descriptors>
							<descriptor>src/main/assembly/bin.xml</descriptor>
						</descriptors>
					</configuration>
				</plugin>
			</plugins>
		</pluginManagement>
	</build>

</project>